@use "sass:math";
@import '../../../scss/defaults';
@import '../../../scss/variables';

@mixin childrenToCircle($childCount, $isDark) {
  $degree: math.div(360, $childCount);

  & > * {
    @for $i from 1 to $childCount + 1 {
      &:nth-child(#{$i}) {
        @if $isDark == dark {
          @extend .dot-base-dark;
        } @else {
          @extend .dot-base;
        }
        transform: rotate(($i * $degree) + 0deg) translateY($radius-big);
      }
    }
  }
}

.container {
  position: relative;
  min-width: $container-size;
  min-height: $container-size;
  width: $container-size;
  height: $container-size;
  border-radius: $border-radius;
  background-color: $color-background-light;

  transition: all .3s;

  &:hover {
    transition-delay: 2s;
    transform: scale(1.05);
  }

  &-dark {
    @extend .container;
    background-color: $color-background-dark;
  }
}

.container-inner {
  position: absolute;
  width: $container-inner-size;
  height: $container-inner-size;
  background-color: transparent;
  animation: rotate 24s linear infinite;

  @include childrenToCircle(12, light);

  &-dark {
    @extend .container-inner;
    @include childrenToCircle(12, dark);
  }
}

.container-inner-small {
  display: block;
  position: absolute;

  top: calc(math.div($container-size, 2) - math.div($container-inner-small-size, 2));
  left: calc(math.div($container-size, 2) - math.div($container-inner-small-size, 2));

  width: $container-inner-small-size;
  height: $container-inner-small-size;
  background-color: transparent;
  animation: rotate-back 6s linear infinite;

  &-dark {
    @extend .container-inner-small;
  }
}

.dot-base {
  min-width: $dot-size;
  min-height: $dot-size;
  width: $dot-size;
  height: $dot-size;
  background-color: $color-background-dark;
  border-radius: 50%;

  position: absolute;
  top: calc(math.div($container-size, 2) - math.div($dot-size, 2));
  left: calc(math.div($container-size, 2) - math.div($dot-size, 2));

  &-dark {
    @extend .dot-base;
    background-color: $color-background-light;
  }
}

.dot-small {
  min-width: math.div($dot-size, 2);
  min-height: math.div($dot-size, 2);
  width: math.div($dot-size, 2);
  height: math.div($dot-size, 2);
  background-color: $color-background-dark-focused;
  border-radius: 50%;

  position: absolute;
  top: calc(math.div($container-inner-small-size, 2) - math.div($dot-size, 4));
  left: calc(math.div($container-inner-small-size, 2) - math.div($dot-size, 4));
  transform: translateY($radius-small);

  &-dark {
    @extend .dot-small;
    background-color: $color-background-light-focused;
  }
}

@keyframes rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes rotate-back {
  0% {
    transform: rotate(360deg);
  }
  100% {
    transform: rotate(0deg);
  }
}
